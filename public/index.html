<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Falling Images - Javzaa</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        min-height: 100vh;
        background: linear-gradient(
          135deg,
          #0a0015 0%,
          #1a0520 50%,
          #0f0820 100%
        );
        overflow: hidden;
        font-family: system-ui, -apple-system, sans-serif;
        position: relative;
      }

      .fireworks-canvas {
        position: fixed;
        inset: 0;
        pointer-events: none;
        z-index: 1;
      }

      .container {
        position: fixed;
        inset: 0;
        overflow: hidden;
        transform-style: preserve-3d;
        perspective: 1000px;
        z-index: 2;
      }

      .falling-item {
        position: absolute;
        pointer-events: none;
        will-change: transform, opacity;
      }

      .falling-item img {
        display: block;
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 12px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.6),
          0 0 30px rgba(255, 180, 240, 0.4),
          inset 0 0 20px rgba(255, 255, 255, 0.1);
        filter: brightness(1.1) contrast(1.05);
      }

      .falling-text {
        font-size: 28px;
        font-weight: 700;
        white-space: nowrap;
        text-shadow: 0 0 10px currentColor, 0 0 20px currentColor,
          0 0 30px rgba(255, 255, 255, 0.5);
        filter: drop-shadow(0 4px 12px rgba(0, 0, 0, 0.6));
      }

      .color-1 {
        color: #ff6b9a;
      }
      .color-2 {
        color: #9be7ff;
      }
      .color-3 {
        color: #ffd6f0;
      }
      .color-4 {
        color: #d0ffb8;
      }
      .color-5 {
        color: #ffeb99;
      }

      .controls {
        position: fixed;
        top: 20px;
        left: 20px;
        background: rgba(20, 10, 30, 0.85);
        backdrop-filter: blur(10px);
        padding: 20px;
        border-radius: 16px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        color: white;
        z-index: 100;
        max-width: 320px;
      }

      .controls.hidden {
        transform: translateX(-120%);
        opacity: 0;
        pointer-events: none;
      }

      #toggleControls {
        background: linear-gradient(135deg, #ff6b9a, #ff3d7f);
        color: white;
        border: none;
        padding: 10px 12px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        box-shadow: 0 4px 15px rgba(255, 107, 154, 0.4);
        font-weight: 700;
      }

      #showControls {
        display: none;
        position: fixed;
        top: 20px;
        left: 20px;
        z-index: 110;
        background: linear-gradient(135deg, #ff6b9a, #ff3d7f);
        color: white;
        border: none;
        padding: 10px 12px;
        border-radius: 12px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.4);
        cursor: pointer;
      }

      .controls.hidden + #showControls {
        display: block;
      }

      .controls,
      #showControls {
        transition: transform 0.28s ease, opacity 0.28s ease;
      }

      .controls h3 {
        margin: 0 0 15px 0;
        color: #ff6b9a;
        font-size: 18px;
      }

      .control-group {
        margin-bottom: 15px;
      }

      .control-group label {
        display: block;
        margin-bottom: 5px;
        font-size: 13px;
        color: #ccc;
      }

      .control-group input[type="text"] {
        width: 100%;
        padding: 8px 12px;
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 8px;
        color: white;
        font-size: 13px;
        margin-bottom: 8px;
      }

      .control-group input[type="range"] {
        width: 100%;
      }

      .control-group button {
        width: 100%;
        padding: 10px;
        background: linear-gradient(135deg, #ff6b9a, #ff3d7f);
        border: none;
        border-radius: 8px;
        color: white;
        font-weight: 600;
        cursor: pointer;
        font-size: 14px;
        transition: transform 0.2s, box-shadow 0.2s;
        box-shadow: 0 4px 15px rgba(255, 107, 154, 0.4);
      }

      .control-group button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(255, 107, 154, 0.6);
      }

      .control-group button:active {
        transform: translateY(0);
      }

      .image-list {
        font-size: 12px;
        color: #999;
        margin-top: 8px;
        max-height: 100px;
        overflow-y: auto;
      }

      .value-display {
        display: inline-block;
        color: #ff6b9a;
        font-weight: 600;
        margin-left: 8px;
      }

      .note {
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        color: #999;
        font-size: 13px;
        text-align: center;
        text-shadow: 0 2px 8px rgba(0, 0, 0, 0.8);
      }
    </style>
  </head>
  <body>
    <canvas class="fireworks-canvas" id="fireworks"></canvas>
    <div class="container" id="container"></div>

    <div class="controls">
      <h3>‚ú® Image Rain Controls</h3>

      <div class="control-group">
        <label>Add Image URLs (one per line):</label>
        <textarea
          id="imageUrls"
          rows="4"
          style="
            width: 100%;
            padding: 8px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            color: white;
            font-size: 12px;
            font-family: monospace;
          "
        >
https://scontent.fuln4-3.fna.fbcdn.net/v/t1.15752-9/576330062_3406245986218589_4284790831027519057_n.jpg?stp=dst-jpg_s2048x2048_tt6&_nc_cat=102&ccb=1-7&_nc_sid=0024fc&_nc_ohc=fwLzs_e9-S0Q7kNvwE_OCKq&_nc_oc=Adk34fiEKPyz4bHBYs0adTWEGkW_W23tjPTFt3OmnAPYqe8WGh4QY_yjRYxG0QdjzWo&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.fuln4-3.fna&oh=03_Q7cD3wHh09mV_JJsftpvxlMFi9CXd97SS22AGmyNOHf61bIcAQ&oe=693427D7
https://scontent.fuln4-3.fna.fbcdn.net/v/t1.15752-9/575108083_868246932438106_1628161125503317293_n.jpg?stp=dst-jpg_s480x480_tt6&_nc_cat=111&ccb=1-7&_nc_sid=0024fc&_nc_ohc=wEVMgpEwVYIQ7kNvwHpoSbv&_nc_oc=Adkj2msk8105Kx3xag_yoGOTAzHsxckywMDODa7nz2i-p-bFtYf3tmS-Zh-Exf4Azgc&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.fuln4-3.fna&oh=03_Q7cD3wHa88_6pveq4WpIifIAhbBz_-Mn3QZTZvo1ueOQWLZHsg&oe=69342A17
https://scontent.fuln4-2.fna.fbcdn.net/v/t1.15752-9/552142485_1547993452876785_2207031953596089731_n.jpg?stp=dst-jpg_s480x480_tt6&_nc_cat=106&ccb=1-7&_nc_sid=0024fc&_nc_ohc=J9giduE7yu0Q7kNvwFUQmsi&_nc_oc=Adkxvj1F0lIaWYGOnBUOpjHnQwyykzb_cWqhbdItBTbMRBKSxnkzRo5lkat0fSK3pq0&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.fuln4-2.fna&oh=03_Q7cD3wFB1rMXhuJbbDss80Wm-IEBM0Dt8pdizqHVeN-YW00Erg&oe=693436E4
https://scontent.fuln4-2.fna.fbcdn.net/v/t1.15752-9/553858143_1273487191194297_4359297680265047238_n.jpg?stp=dst-jpg_p480x480_tt6&_nc_cat=100&ccb=1-7&_nc_sid=0024fc&_nc_ohc=zGmQ-kokM7wQ7kNvwFR6ub4&_nc_oc=AdljM5C6v0QahhohDBI2ZN__xnKx82NAkgJ9_wMUIZGxPQ9eHK0twkPGPKsJBE5St_8&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.fuln4-2.fna&oh=03_Q7cD3wGVCB81zKk-hNIjZu_n6pR5XMPeBDKoEir6ugGDRrX4ew&oe=69341C74
https://scontent.fuln4-2.fna.fbcdn.net/v/t1.15752-9/566253377_819933770490767_6132602725186326096_n.jpg?stp=dst-jpg_s480x480_tt6&_nc_cat=104&ccb=1-7&_nc_sid=0024fc&_nc_ohc=s9pVfvVK68kQ7kNvwEU4BaU&_nc_oc=AdkRp0DNRLoRjqyaBoEnON3XwVkvMgkSeVf4B6jIgBcJblH1zePB1MHa5YUnBf6PDPE&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.fuln4-2.fna&oh=03_Q7cD3wG8gs8mVCIfFf7wltbHqy4rYEfbGCCYiZaRwyYQjJGlDQ&oe=693415BB
https://scontent.fuln4-2.fna.fbcdn.net/v/t1.15752-9/552587404_1497068814774702_1558183347314705650_n.jpg?stp=dst-jpg_s640x640_tt6&_nc_cat=104&ccb=1-7&_nc_sid=0024fc&_nc_ohc=SnzQIymivx4Q7kNvwEbCsrB&_nc_oc=AdnsAt4iTjv5d7TPoSl_kakFwFMxLsbZsxUdm9IppI_yMuUr_mLwcuNkNfVzBNQpICo&_nc_ad=z-m&_nc_cid=0&_nc_zt=23&_nc_ht=scontent.fuln4-2.fna&oh=03_Q7cD3wEnEFGBGvBoZFcG-xYid3MhIef9cMsi4aBbmwjcu5nBUw&oe=693422E6
https://cdn.fbsbx.com/v/t59.2708-21/469756378_1637167893840450_933503785158201191_n.webp?_nc_cat=110&ccb=1-7&_nc_sid=de7c13&_nc_ohc=VnjPbMIkTVgQ7kNvwHsAEXA&_nc_oc=Adncm4X_vZmIU9PXNX_8rM_oP5p_BxzEmWJj8TCcUvZu3fucsQi23WuHPG_Q851QtEQ&_nc_zt=7&_nc_ht=cdn.fbsbx.com&_nc_gid=l0rdh9zcb71BO_pRsg10bQ&oh=03_Q7cD3wGXfjLnyEEdj9OEWMBoLWZvHgSDqWzevrUpa3L5wBZl_A&oe=690EA01F
https://cdn.fbsbx.com/v/t59.2708-21/515373905_23921091434208923_4884872469363421846_n.webp?_nc_cat=103&ccb=1-7&_nc_sid=de7c13&_nc_ohc=wDKbKdMWBOMQ7kNvwEK_zj3&_nc_oc=AdmAdKOPkD6-I6o1B_ZQdZeHO4VZ-UGMQvcOmQFs_V-pyQaGsX9p_2aaDWS6ahzoGpU&_nc_zt=7&_nc_ht=cdn.fbsbx.com&_nc_gid=QljHFwmomozEsiwxjRkCqw&oh=03_Q7cD3wG0BeE5dxYtqEUg8W4HCZSlDpTbvJ7fJ3V9B2eSQPDB-g&oe=690E72A3
</textarea
        >
        <div class="image-list" id="imageCount">8 images loaded</div>
      </div>

      <div class="control-group">
        <label
          >–≠—Ä–≥—ç–ª—Ç–∏–π–Ω —Ö—É—Ä–¥:
          <span class="value-display" id="rotationValue">1</span></label
        >
        <input
          type="range"
          id="rotationSpeed"
          min="0"
          max="20"
          value="1"
          step="1"
        />
      </div>

      <div class="control-group">
        <label
          >–°–∞–ª—é—Ç —Ö—É—Ä–¥:
          <span class="value-display" id="fireworkSpeedValue">1500</span>ms</label
        >
        <input
          type="range"
          id="fireworkSpeed"
          min="500"
          max="4000"
          value="1500"
          step="100"
        />
      </div>

      <div class="control-group">
        <label
          >–£–Ω–∞–ª—Ç—ã–Ω —Ö—É—Ä–¥:
          <span class="value-display" id="fallSpeedValue">7</span>s</label
        >
        <input
          type="range"
          id="fallSpeed"
          min="3"
          max="15"
          value="7"
          step="0.5"
        />
      </div>

      <div class="control-group">
        <label
          >“Æ—Ä–∂–ª–∏–π–Ω —Ö—É—Ä–¥:
          <span class="value-display" id="spawnRateValue">400</span>ms</label
        >
        <input
          type="range"
          id="spawnRate"
          min="300"
          max="2000"
          value="400"
          step="100"
        />
      </div>

      <div class="control-group">
        <button id="clearAll">–ë“Ø–≥–¥–∏–π–≥ –∞—Ä–∏–ª–≥–∞—Ö ‚ú®</button>
      </div>
      <div class="control-group">
        <button id="toggleControls" title="–ù—É—É—Ö" aria-label="–ù—É—É—Ö">–ù—É—É—Ö</button>
      </div>
    </div>

    <div class="note">üíó Images with words ‚Ä¢ Heart fireworks üíó</div>

    <button id="showControls" aria-hidden="true" title="–ö–æ–Ω—Ç—Ä–æ–ª—É—É–¥—ã–≥ —Ö–∞—Ä—É—É–ª–∞—Ö">
      –ö–æ–Ω—Ç—Ä–æ–ª—É—É–¥—ã–≥ —Ö–∞—Ä—É—É–ª–∞—Ö
    </button>

    <script>
      // Fireworks setup with heart shapes
      const fireworksCanvas = document.getElementById("fireworks");
      const fireworksCtx = fireworksCanvas.getContext("2d");
      fireworksCanvas.width = window.innerWidth;
      fireworksCanvas.height = window.innerHeight;

      window.addEventListener("resize", () => {
        fireworksCanvas.width = window.innerWidth;
        fireworksCanvas.height = window.innerHeight;
      });

      const fireworks = [];
      const particles = [];

      // Heart shape patterns
      function getHeartPattern(scale = 1) {
        const points = [];
        for (let t = 0; t < Math.PI * 2; t += 0.1) {
          const x = 16 * Math.pow(Math.sin(t), 3) * scale;
          const y =
            -(
              13 * Math.cos(t) -
              5 * Math.cos(2 * t) -
              2 * Math.cos(3 * t) -
              Math.cos(4 * t)
            ) * scale;
          points.push({ x, y });
        }
        return points;
      }

      // Star pattern
      function getStarPattern(scale = 1) {
        const points = [];
        const spikes = 5;
        for (let i = 0; i < spikes * 2; i++) {
          const angle = (i * Math.PI) / spikes;
          const radius = i % 2 === 0 ? 20 * scale : 10 * scale;
          points.push({
            x: Math.cos(angle) * radius,
            y: Math.sin(angle) * radius,
          });
        }
        return points;
      }

      // Circle burst
      function getCirclePattern(scale = 1) {
        const points = [];
        for (let i = 0; i < 60; i++) {
          const angle = (i * Math.PI * 2) / 60;
          points.push({
            x: Math.cos(angle) * 15 * scale,
            y: Math.sin(angle) * 15 * scale,
          });
        }
        return points;
      }

      // Spiral pattern
      function getSpiralPattern(scale = 1) {
        const points = [];
        for (let i = 0; i < 50; i++) {
          const angle = (i * Math.PI) / 8;
          const radius = i * 0.5 * scale;
          points.push({
            x: Math.cos(angle) * radius,
            y: Math.sin(angle) * radius,
          });
        }
        return points;
      }

      // Ring pattern
      function getRingPattern(scale = 1) {
        const points = [];
        const rings = 3;
        for (let r = 0; r < rings; r++) {
          const radius = (r + 1) * 8 * scale;
          const count = 20 + r * 10;
          for (let i = 0; i < count; i++) {
            const angle = (i * Math.PI * 2) / count;
            points.push({
              x: Math.cos(angle) * radius,
              y: Math.sin(angle) * radius,
            });
          }
        }
        return points;
      }

      const patterns = [
        getHeartPattern,
        getStarPattern,
        getCirclePattern,
        getSpiralPattern,
        getRingPattern,
      ];

      class Firework {
        constructor() {
          this.x = Math.random() * fireworksCanvas.width;
          this.y = fireworksCanvas.height;
          this.targetY = Math.random() * fireworksCanvas.height * 0.4 + 50;
          this.speed = Math.random() * 3 + 3;
          this.color = `hsl(${Math.random() * 360}, 100%, 65%)`;
          this.trail = [];
        }

        update() {
          this.trail.push({ x: this.x, y: this.y });
          if (this.trail.length > 10) this.trail.shift();
          this.y -= this.speed;
          return this.y <= this.targetY;
        }

        draw() {
          fireworksCtx.save();
          for (let i = 0; i < this.trail.length; i++) {
            const t = this.trail[i];
            fireworksCtx.globalAlpha = i / this.trail.length;
            fireworksCtx.fillStyle = this.color;
            fireworksCtx.beginPath();
            fireworksCtx.arc(t.x, t.y, 2, 0, Math.PI * 2);
            fireworksCtx.fill();
          }
          fireworksCtx.restore();

          fireworksCtx.fillStyle = this.color;
          fireworksCtx.beginPath();
          fireworksCtx.arc(this.x, this.y, 3, 0, Math.PI * 2);
          fireworksCtx.fill();
        }
      }

      class Particle {
        constructor(x, y, color, vx, vy) {
          this.x = x;
          this.y = y;
          this.color = color;
          this.vx = vx;
          this.vy = vy;
          this.life = 1;
          this.decay = Math.random() * 0.015 + 0.01;
          this.size = Math.random() * 3 + 1.5;
          this.gravity = 0.08;
        }

        update() {
          this.vx *= 0.97;
          this.vy *= 0.97;
          this.vy += this.gravity;
          this.x += this.vx;
          this.y += this.vy;
          this.life -= this.decay;
          return this.life > 0;
        }

        draw() {
          fireworksCtx.save();
          fireworksCtx.globalAlpha = this.life;
          fireworksCtx.fillStyle = this.color;
          fireworksCtx.shadowBlur = 10;
          fireworksCtx.shadowColor = this.color;
          fireworksCtx.beginPath();
          fireworksCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
          fireworksCtx.fill();
          fireworksCtx.restore();
        }
      }

      function explode(x, y, color) {
        // Random pattern selection
        const patternFunc = patterns[Math.floor(Math.random() * patterns.length)];
        const scale = Math.random() * 0.8 + 0.8;
        const pattern = patternFunc(scale);

        // Create particles along the pattern
        pattern.forEach((point) => {
          const speed = Math.random() * 2 + 2;
          const vx = (point.x / 15) * speed;
          const vy = (point.y / 15) * speed;
          particles.push(new Particle(x, y, color, vx, vy));
        });

        // Add some random sparkles
        for (let i = 0; i < 30; i++) {
          const angle = Math.random() * Math.PI * 2;
          const speed = Math.random() * 4 + 1;
          const vx = Math.cos(angle) * speed;
          const vy = Math.sin(angle) * speed;
          particles.push(new Particle(x, y, color, vx, vy));
        }
      }

      function animateFireworks() {
        fireworksCtx.fillStyle = "rgba(10, 0, 21, 0.15)";
        fireworksCtx.fillRect(
          0,
          0,
          fireworksCanvas.width,
          fireworksCanvas.height
        );

        for (let i = fireworks.length - 1; i >= 0; i--) {
          const fw = fireworks[i];
          const exploded = fw.update();
          fw.draw();

          if (exploded) {
            explode(fw.x, fw.y, fw.color);
            fireworks.splice(i, 1);
          }
        }

        for (let i = particles.length - 1; i >= 0; i--) {
          const p = particles[i];
          const alive = p.update();
          p.draw();

          if (!alive) {
            particles.splice(i, 1);
          }
        }

        requestAnimationFrame(animateFireworks);
      }

      let fireworkInterval;
      function startFireworks(interval = 1500) {
        if (fireworkInterval) clearInterval(fireworkInterval);
        fireworkInterval = setInterval(() => {
          fireworks.push(new Firework());
        }, interval);
      }

      animateFireworks();
      startFireworks();

      // Main falling images script
      const container = document.getElementById("container");
      const imageUrlsInput = document.getElementById("imageUrls");
      const rotationSpeedInput = document.getElementById("rotationSpeed");
      const fallSpeedInput = document.getElementById("fallSpeed");
      const spawnRateInput = document.getElementById("spawnRate");
      const fireworkSpeedInput = document.getElementById("fireworkSpeed");
      const clearAllBtn = document.getElementById("clearAll");

      const words = [
        "Javzaaüíó",
        "wookiey dookiey‚ú®",
        "bunnyüê∞",
        "gunjüë∏",
        "wookieyüíó",
        "dookieyüíó",
        "cutie",
        "sweetie",
        "Baby girl",
        "‚ú®Gunjee",
        "usaa uusanuu? üíß",
        "üíó",
        "üíì",
        "‚ú®",
        "ü´ß",
      ];

      let imageUrls = [];
      let rotationSpeed = 1;
      let fallSpeed = 7;
      let spawnInterval;

      function updateImageUrls() {
        const text = imageUrlsInput.value.trim();
        imageUrls = text.split("\n").filter((url) => url.trim().length > 0);
        document.getElementById("imageCount").textContent = `${
          imageUrls.length
        } image${imageUrls.length !== 1 ? "s" : ""} loaded`;
      }

      function rand(min, max) {
        return Math.random() * (max - min) + min;
      }

      function createFallingItem() {
        const item = document.createElement("div");
        item.className = "falling-item";

        const isImage = imageUrls.length > 0 && Math.random() < 0.6;
        const size = isImage ? rand(60, 120) : rand(24, 48);

        item.style.width = size + "px";
        item.style.height = size + "px";
        item.style.left = rand(0, window.innerWidth - size) + "px";
        item.style.top = "-" + (size + 20) + "px";

        if (isImage) {
          const img = document.createElement("img");
          const url = imageUrls[Math.floor(Math.random() * imageUrls.length)];
          img.src = url;
          img.alt = "falling";
          img.onerror = function () {
            item.innerHTML = '<div class="falling-text">üíó</div>';
          };
          item.appendChild(img);
        } else {
          const text = document.createElement("div");
          text.className = "falling-text color-" + Math.floor(rand(1, 6));
          text.textContent = words[Math.floor(Math.random() * words.length)];
          text.style.fontSize = size + "px";
          item.appendChild(text);
        }

        container.appendChild(item);

        const duration = fallSpeed * 1000;
        const rotation = rand(-360 * rotationSpeed, 360 * rotationSpeed);
        const xDrift = rand(-100, 100);

        const animation = item.animate(
          [
            {
              transform: `translate(0, 0) rotate(0deg)`,
              opacity: 0,
            },
            {
              transform: `translate(${xDrift * 0.3}px, ${
                window.innerHeight * 0.3
              }px) rotate(${rotation * 0.3}deg)`,
              opacity: 1,
              offset: 0.1,
            },
            {
              transform: `translate(${xDrift * 0.6}px, ${
                window.innerHeight * 0.6
              }px) rotate(${rotation * 0.6}deg)`,
              opacity: 1,
              offset: 0.5,
            },
            {
              transform: `translate(${xDrift}px, ${
                window.innerHeight + 100
              }px) rotate(${rotation}deg)`,
              opacity: 0,
            },
          ],
          {
            duration: duration,
            easing: "cubic-bezier(0.25, 0.46, 0.45, 0.94)",
            fill: "forwards",
          }
        );

        animation.onfinish = () => item.remove();
      }

      function startSpawning() {
        if (spawnInterval) clearInterval(spawnInterval);
        spawnInterval = setInterval(
          createFallingItem,
          parseInt(spawnRateInput.value)
        );
      }

      // Update displays and values
      rotationSpeedInput.addEventListener("input", (e) => {
        rotationSpeed = parseInt(e.target.value);
        document.getElementById("rotationValue").textContent = rotationSpeed;
      });

      fallSpeedInput.addEventListener("input", (e) => {
        fallSpeed = parseFloat(e.target.value);
        document.getElementById("fallSpeedValue").textContent = fallSpeed + "s";
      });

      spawnRateInput.addEventListener("input", (e) => {
        document.getElementById("spawnRateValue").textContent =
          e.target.value + "ms";
        startSpawning();
      });

      fireworkSpeedInput.addEventListener("input", (e) => {
        document.getElementById("fireworkSpeedValue").textContent =
          e.target.value + "ms";
        startFireworks(parseInt(e.target.value));
      });

      imageUrlsInput.addEventListener("input", updateImageUrls);

      clearAllBtn.addEventListener("click", () => {
        container.innerHTML = "";
      });

      // Initialize
      updateImageUrls();

      // Set default spawn rate depending on device
      (function () {
        const isMobile =
          /Mobi|Android|iP(ad|hone|od)|IEMobile|Opera Mini/i.test(
            navigator.userAgent
          ) ||
          (window.matchMedia && window.matchMedia("(pointer:coarse)").matches);
        const defaultSpawn = isMobile ? 1200 : 400;
        spawnRateInput.value = defaultSpawn;
        document.getElementById("spawnRateValue").textContent =
          defaultSpawn + "ms";
      })();

      startSpawning();

      // Create initial items
      for (let i = 0; i < 15; i++) {
        setTimeout(createFallingItem, i * 200);
      }

      // Collapsible controls
      (function () {
        const controls = document.querySelector(".controls");
        const toggleBtn = document.getElementById("toggleControls");
        const showBtn = document.getElementById("showControls");

        if (!controls || !toggleBtn || !showBtn) return;

        function hideControls() {
          controls.classList.add("hidden");
          toggleBtn.setAttribute("aria-expanded", "false");
          showBtn.setAttribute("aria-hidden", "false");
        }

        function showControls() {
          controls.classList.remove("hidden");
          toggleBtn.setAttribute("aria-expanded", "true");
          showBtn.setAttribute("aria-hidden", "true");
        }

        toggleBtn.addEventListener("click", () => {
          if (controls.classList.contains("hidden")) showControls();
          else hideControls();
        });

        showBtn.addEventListener("click", showControls);

        document.addEventListener("keydown", (e) => {
          const tag = document.activeElement && document.activeElement.tagName;
          if (tag === "INPUT" || tag === "TEXTAREA" || tag === "SELECT") return;
          if (e.key && e.key.toLowerCase() === "c") {
            if (controls.classList.contains("hidden")) showControls();
            else hideControls();
          }
        });
      })();
    </script>
  </body>
</html>